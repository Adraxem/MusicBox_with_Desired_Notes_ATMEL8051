ORG 0000

;Ardacan YILDIZ 22002607 EEE212-003
;Frequency changes every second in my machine, not miliseconds so accordingly



MOV R0,#0F5H


LOOP: MOV TMOD, #00010101B
BACK: MOV TH1, R0
PUSH ACC
MOV A,R0
MOV R1,A
POP ACC
MOV TL1,#00H
SETB TR0
SETB TR1
JNB TF1,$
CLR TR0
CLR TR1
MOV A,TH0
MOV A,R0
FINAL:CPL P1.0
CPL P1.1
CPL P1.2
CPL P1.3
CPL P1.4
CPL P1.4
CPL P1.5
CPL P1.6
CPL P1.7
MOV P1,A

CLR A

ACALL COMNWRT
ACALL DELAY
MOV A, P1
ACALL DATAWRT


DJNZ R1,FINAL
DEC R0
CLR TF1
MOV TH0,#0
MOV TL0,#0
SJMP BACK




COMNWRT:
MOV P1,A
CLR P2.0
CLR P2.1
SETB P2.2
ACALL DELAY
CLR P2.2
RET

DATAWRT:
MOV P1,A
SETB P2.0
CLR P2.1
SETB P2.2
ACALL DELAY
CLR P2.2
RET

DELAY: MOV R3, #50
HERE2: MOV R4,#50
HERE: DJNZ R4, HERE
DJNZ R3,HERE2
RET






END
